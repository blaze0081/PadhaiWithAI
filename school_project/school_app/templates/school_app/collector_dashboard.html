{% extends 'school_app/base.html' %}
{% block content %}
<div>
	<h1 style="text-align: center; font-size: 40px;">Collector Dashboard</h1>
	<br>
</div>


<!-- Action Buttons -->
 <div class="row mt-4">
<div class="col-md-4">
        <div class="card">
            <div class="card-body" style="text-align: center;">
             
                 <a href="{% url 'add_test' %}" class="btn btn-primary w-50">Schedule New Test </a>
            </div>
        </div>
    </div>
	<div class="col-md-4">
        <div class="card">
            <div class="card-body" style="text-align: center;">
               
                <a href="{% url 'student_ranking' %}" class="btn btn-success">Student Rankings</a>
            </div>
        </div>
    </div>
	<div class="col-md-4">
        <div class="card">
            <div class="card-body" style="text-align: center;">
				
				
              
               <a href="{% url 'student_report' %}" class="btn btn-info ">Student Report</a>
            </div>
        </div>
    </div>
</div>
 <div class="d-flex flex-column align-items-center gap-3 mb-4">
  
</div>

<div class="text-end mb-4">
	<!-- Button to create a new test -->
	
</div>
<div>
	<h2 style="font-size: 36px;">Schedule Test List</h2>
	<table class="table table-bordered table-striped">
		<thead>
			<tr>
				<th>#</th>
				<th>Test Name</th>
				<th>Subject Name</th>
				<th>Test Date</th>
				<th>Status</th>
				<th>Download Question Paper</th>
				<th>Download Answer</th>
				<th>Actions</th>
				<th>Test Results</th> <!-- New Column -->
			</tr>
		</thead>
		<tbody>
			{% for test in tests %}
			<tr>
				<td>{{ forloop.counter }}</td>
				<td>{{ test.test_name }}</td>
				<td>{{ test.subject_name }}</td>
				<td>{{ test.test_date }}</td>
				<td>
					{% if test.is_active %}
						<span class="badge bg-success">Active</span>
					{% else %}
						<span class="badge bg-secondary">Inactive</span>
					{% endif %}
				</td>
				<td>
				{% if test.pdf_file_questions %}
					<a href="{{ test.pdf_file_questions.url }}" class="btn btn-danger btn-sm" download>Download PDF</a>
				{% else %}
					<p>No PDF available for download.</p>
				{% endif %}
			</td>
			<td>
				{% if test.pdf_file_answers %}
					<a href="{{ test.pdf_file_answers.url }}" class="btn btn-info btn-sm" download>Download PDF</a>
				{% else %}
					<p>No PDF available for download.</p>
				{% endif %}
			</td>
			<td>
					{% if not test.is_active %}
					<a href="{% url 'activate_test' test.test_number %}" class="btn btn-primary btn-sm">Activate</a>
					{% else %}
					<a href="{% url 'deactivate_test' test.test_number %}" class="btn btn-warning btn-sm">Deactivate</a>
					{% endif %}
				</td>
				<td>
					<a href="{% url 'view_test_results' test.test_number %}" class="btn btn-warning btn-sm">View Results</a>
				</td>
			</tr>
			{% empty %}
			<tr>
				<td colspan="7" class="text-center">No tests available.</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
</div>


<div class="mt-5">
	<h2 style="font-size: 36px;">Registered Schools List</h2>
	<table class="table table-striped">
		<thead>
			<tr>
				<th>#</th>
				<th>School Name</th>
				<th>Admin</th>
				<th>Created At</th>
			</tr>
		</thead>
		<tbody>
			{% for school in schools %}
				<tr>
					<td>{{ forloop.counter }}</td>
					<td>{{ school.name }}</td>
					<td>{{ school.admin }}</td>
					<td>{{ school.created_at|date:"d M Y, H:i" }}</td>
				</tr>
			{% empty %}
				<tr>
					<td colspan="4">No schools available.</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
</div>
{% endblock %}
